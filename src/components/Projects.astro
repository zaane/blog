---
import ProjectCard from "./ProjectCard.astro";

interface Project {
  name: string;
  status?: "Open Source" | "Closed Source";
  videoLabel?: string;
  videoUrl?: string;
  videoTitle?: string;
  videoPosterQuality?: "max" | "high" | "default" | "low";
  description?: string;
  techStack?: {
    frontend: string[];
    backend: string[];
  };
  currentFeatures?: string[];
  nextSteps?: string[];
}

interface ProjectSection {
  id: string;
  title: string;
  description: string;
  projects: Project[];
}

interface Props {
  sections: ProjectSection[];
  heading?: string;
}

const { sections } = Astro.props as Props;
---

<section aria-labelledby="projects-heading" class="section projects-section">
  <div class="project-categories">
    {
      sections.map((section) => (
        <section
          class={`project-category project-category-${section.id}`}
          aria-labelledby={`projects-${section.id}`}
        >
          <header class="project-category-head">
            <h3 id={`projects-${section.id}`} class="project-category-title">
              {section.title}
            </h3>
            <p class="project-category-description">{section.description}</p>
          </header>

          {
            section.projects.length > 0 ? (
              <ul class="project-list">
                {section.projects.map((project) => (
                  <li class={`project-item ${!project.status ? "project-item-placeholder" : ""}`}>
                    <ProjectCard project={project} />
                  </li>
                ))}
              </ul>
            ) : (
              <div class="project-coming-soon" role="status">
                Coming soon.
              </div>
            )
          }
        </section>
      ))
    }
  </div>
</section>
